{"version":3,"sources":["webpack:///./src/common/metrics/goingLink.ts","webpack:///./src/common/brangInfo/index.tsx","webpack:///./src/pages/brang/{brangsJson.id}.tsx","webpack:///./src/common/body/tag.tsx","webpack:///./src/common/panel.tsx","webpack:///./node_modules/react-schemaorg/dist/src/json-ld.js","webpack:///./node_modules/react-schemaorg/dist/src/index.js"],"names":["checkLink","id","resultFromLocalStore","store","localStorage","getItem","JSON","parse","Set","has","window","ym","add","process","setItem","stringify","Body","data","name","description","startTime","endTime","link","tags","location","date","styles","useStyles","backRef","Grid","container","direction","item","Typography","variant","className","mainText","secondaryText","moment","format","spacing","map","tag","i","key","href","onClick","classes","box","makeStyles","fontSize","lineHeight","color","theme","colors","disabledText","marginBottom","backgroundColor","attention","width","mapDateForLd","time","text","dateFormat","toISOString","BrangInfo","eventLdDescription","helmetJsonLdProp","doorTime","brangsJson","endDate","isAccessibleForFree","inLanguage","url","about","ldData","Tag","children","disabled","clsx","disabledTag","enabledTag","tagText","typography","textAlign","borderRadius","padding","marginRight","overflow","textOverflow","wordWrap","tagColor","Panel","paper","margin","border","borders","tableBorder","transparentBackground","Object","defineProperty","exports","value","jsonLdScriptProps","JsonLd","React","options","arguments","length","undefined","type","dangerouslySetInnerHTML","__html","safeJsonLdReplacer","space","props","createElement","assign","innerHTML","ESCAPE_ENTITIES","freeze","ESCAPE_REGEX","RegExp","concat","keys","join","ESCAPE_REPLACER","t","_","replace","json_ld_1","enumerable","get"],"mappings":"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","file":"component---src-pages-brang-brangs-json-id-tsx-55a033b6b8ffa0856b2d.js","sourcesContent":["\nconst storeName = \"brang-metrcis-going-link\";\n\nfunction getStore(): Set<string> {\n  const resultFromLocalStore = localStorage.getItem(storeName);\n  if (!!resultFromLocalStore) {\n    return JSON.parse(resultFromLocalStore) as Set<string>\n  }\n  else {\n    return new Set<string>()\n  }\n}\n\nexport function checkLink(id: string) {\n  let store = getStore();\n  if (!store.has(id) && !window.ym) {\n    store = store.add(id);\n    window.ym(process.env.GATSBY_YM, 'reachGoal', 'goingLink');\n    localStorage.setItem(storeName, JSON.stringify(store));\n  }\n}\n","import { Grid, makeStyles, Typography } from '@material-ui/core';\nimport moment from 'moment';\nimport React from 'react';\nimport { Tag } from '../body/tag';\nimport { Header } from '../header';\nimport { DetailedBrangInfo } from '../lib/model';\nimport { theme } from '../lib/theme';\nimport { checkLink } from '../metrics/goingLink';\nimport { Panel } from '../panel';\n\ninterface BrangProps {\n  data: DetailedBrangInfo\n}\n\nexport const Body = ({data}: BrangProps) => {\n  const {name, description, startTime, endTime, link, tags, location, date, id} = data,\n    styles = useStyles();\n\n  return (\n    <>\n      <Header backRef=\"/calendar\"/>\n      <Grid container direction=\"column\">\n        <Grid item>\n          <Panel>\n            <Typography variant=\"h1\" className={styles.mainText}>{name}</Typography>\n            <Typography variant=\"h2\" className={styles.secondaryText}>{moment(date, \"YYYY-MM-DD\").format(\"D MMMM YYYY\")}<br/>\n                Начало в {startTime}\n                {!!endTime && <>\n                  <br/>\n                    Окончание в {endTime}\n                  </>} <br/>\n                Место проведения: {location}<br/>\n            </Typography>\n            <Grid container spacing={1}>\n              {tags.map((tag, i) =>\n                  <Grid item key={i}>\n                    <Tag>{tag}</Tag>\n                  </Grid>\n                )}\n            </Grid><br/>\n            <a href={link} onClick={() => checkLink(id)}>\n              <Tag classes={{box: styles.link}}>\n                <Typography variant=\"body2\">\n                  Сылка на мероприятие\n                </Typography>\n              </Tag>\n            </a>\n          </Panel>\n        </Grid>\n        <Grid item>\n          <Panel>\n            <Typography variant=\"body1\">{description}</Typography><br/>\n          </Panel>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nconst useStyles = makeStyles({\n  mainText: {\n    fontSize: \"34px\",\n    lineHeight: \"40px\"\n  },\n  secondaryText: {\n    fontSize: \"16px\",\n    lineHeight: \"1.3\",\n    color: theme.colors.disabledText,\n    marginBottom: '10px'\n  },\n  link: {\n    backgroundColor: theme.colors.attention,\n    width: 'fit-content',\n  }\n})\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport { BrangQuery, QueryData } from \"../../common/lib/model\"\nimport { Body } from \"../../common/brangInfo\"\nimport { SocialEvent } from \"schema-dts\";\nimport { helmetJsonLdProp } from \"react-schemaorg\";\nimport moment from \"moment\";\nimport { Head } from \"../../common/seo\";\nimport { Layout } from \"../../common/layout\";\n\nconst mapDateForLd = (date: string, time: string | null) => {\n  const dateFormat = \"YYYY-MM-DD\",\n   text = time? date + \" \" + time: date,\n   m = time? moment(text, dateFormat + \" hh:mm\") : moment(text, dateFormat)\n  return m.toISOString(true)\n}\n\nconst BrangInfo = ({ data }: QueryData<BrangQuery, never>) => {\n  const eventLdDescription = helmetJsonLdProp<SocialEvent>({\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"SocialEvent\",\n    doorTime: mapDateForLd(data.brangsJson.date, data.brangsJson.startTime),\n    endDate: mapDateForLd(data.brangsJson.date, data.brangsJson.endTime || data.brangsJson.startTime),\n    isAccessibleForFree: true,\n    location: data.brangsJson.location,\n    inLanguage: \"ru\",\n    description: data.brangsJson.description,\n    url: data.brangsJson.link,\n    name: data.brangsJson.name,\n    about: data.brangsJson.tags\n  })\n\n\n  return (\n    <Layout>\n      <Head ldData={eventLdDescription}/>\n      <Body data={data.brangsJson}/>\n    </Layout>\n  );\n}\n\nexport const query = graphql`\n  query getBarngInfo($id: String) {\n    brangsJson(id: {eq: $id}) {\n      date\n      description\n      id\n      link\n      location\n      name\n      startTime\n      tags\n    }\n  }\n`\n\nexport default BrangInfo\n","import { Box, makeStyles, Typography } from '@material-ui/core';\r\nimport clsx from 'clsx';\r\nimport React, { PropsWithChildren } from 'react';\r\nimport { theme } from '../lib/theme';\r\n\r\ninterface TagProps {\r\n  classes?: {\r\n    box?: string,\r\n    typography?: string\r\n  },\r\n  disabled?: boolean\r\n}\r\n\r\nexport const Tag = ({children, classes, disabled}: PropsWithChildren<TagProps>) => {\r\n  const styles = useStyles()\r\n\r\n  return (\r\n    <Box className={clsx(styles.tag, classes?.box, disabled? styles.disabledTag: styles.enabledTag)}>\r\n      <Typography className={clsx(styles.tagText, classes?.typography)}>{children}</Typography>\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  tag: {\r\n    textAlign: 'center',\r\n    borderRadius: '6px',\r\n    padding: \"5px\",\r\n    marginRight: \"5px\"\r\n  },\r\n  tagText: {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    textAlign: 'left',\r\n    fontSize: '14px',\r\n    lineHeight: '20px',\r\n    wordWrap: 'unset'\r\n  },\r\n  enabledTag: {\r\n    backgroundColor: theme.colors.tagColor\r\n  },\r\n  disabledTag: {\r\n    backgroundColor: theme.colors.disabledTag\r\n  }\r\n})\r\n","import { makeStyles, Paper } from '@material-ui/core';\r\nimport clsx from 'clsx';\r\nimport React, { PropsWithChildren } from 'react';\r\nimport { theme } from './lib/theme';\r\n\r\ninterface PanelProps {\r\n  className?: string\r\n}\r\n\r\nexport const Panel = ({children, className}: PropsWithChildren<PanelProps>) => {\r\n  const styles = useStyles()\r\n  return (\r\n    <Paper className={clsx(styles.paper, className)}>\r\n      {children}\r\n    </Paper>\r\n  )\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    margin: \"24px\",\r\n    border: theme.borders.tableBorder,\r\n    backgroundColor: theme.colors.transparentBackground\r\n  }\r\n})\r\n","\"use strict\";\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.helmetJsonLdProp = exports.jsonLdScriptProps = exports.JsonLd = void 0;\n\nvar React = require(\"react\");\n\nfunction JsonLd(props) {\n  return React.createElement(\"script\", Object.assign({}, jsonLdScriptProps(props.item, props)));\n}\n\nexports.JsonLd = JsonLd;\n\nfunction jsonLdScriptProps(item) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    type: \"application/ld+json\",\n    dangerouslySetInnerHTML: {\n      __html: JSON.stringify(item, safeJsonLdReplacer, options.space)\n    }\n  };\n}\n\nexports.jsonLdScriptProps = jsonLdScriptProps;\n\nfunction helmetJsonLdProp(item) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    type: \"application/ld+json\",\n    innerHTML: JSON.stringify(item, safeJsonLdReplacer, options.space)\n  };\n}\n\nexports.helmetJsonLdProp = helmetJsonLdProp;\nvar ESCAPE_ENTITIES = Object.freeze({\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&apos;\"\n});\nvar ESCAPE_REGEX = new RegExp(\"[\".concat(Object.keys(ESCAPE_ENTITIES).join(\"\"), \"]\"), \"g\");\n\nvar ESCAPE_REPLACER = function ESCAPE_REPLACER(t) {\n  return ESCAPE_ENTITIES[t];\n};\n/**\n * A replacer for JSON.stringify to strip JSON-LD of illegal HTML entities\n * per https://www.w3.org/TR/json-ld11/#restrictions-for-contents-of-json-ld-script-elements\n */\n\n\nvar safeJsonLdReplacer = function () {\n  // Replace per https://www.w3.org/TR/json-ld11/#restrictions-for-contents-of-json-ld-script-elements\n  // Solution from https://stackoverflow.com/a/5499821/864313\n  return function (_, value) {\n    switch (typeof value) {\n      case \"object\":\n        // Omit null values.\n        if (value === null) {\n          return undefined;\n        }\n\n        return value;\n      // JSON.stringify will recursively call replacer.\n\n      case \"number\":\n      case \"boolean\":\n      case \"bigint\":\n        return value;\n      // These values are not risky.\n\n      case \"string\":\n        return value.replace(ESCAPE_REGEX, ESCAPE_REPLACER);\n\n      default:\n        {\n          // We shouldn't expect other types.\n          isNever(value); // JSON.stringify will remove this element.\n\n          return undefined;\n        }\n    }\n  };\n}(); // Utility: Assert never\n\n\nfunction isNever(_) {}","\"use strict\";\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.jsonLdScriptProps = exports.JsonLd = exports.helmetJsonLdProp = void 0;\n\nvar json_ld_1 = require(\"./json-ld\");\n\nObject.defineProperty(exports, \"helmetJsonLdProp\", {\n  enumerable: true,\n  get: function get() {\n    return json_ld_1.helmetJsonLdProp;\n  }\n});\nObject.defineProperty(exports, \"JsonLd\", {\n  enumerable: true,\n  get: function get() {\n    return json_ld_1.JsonLd;\n  }\n});\nObject.defineProperty(exports, \"jsonLdScriptProps\", {\n  enumerable: true,\n  get: function get() {\n    return json_ld_1.jsonLdScriptProps;\n  }\n});"],"sourceRoot":""}